import clearIconDay from "./assets/icons/large/10000_clear_large@2x.png";
import clearIconNight from "./assets/icons/large/10001_clear_large@2x.png";
import cloudyIcon from "./assets/icons/large/10010_cloudy_large@2x.png";
import MostlyClearIconDay from "./assets/icons/large/11000_mostly_clear_large@2x.png";
import MostlyClearIconNight from "./assets/icons/large/11001_mostly_clear_large@2x.png";
import PartlyCloudyIconDay from "./assets/icons/large/11010_partly_cloudy_large@2x.png";
import PartlyCloudyIconNight from "./assets/icons/large/11011_partly_cloudy_large@2x.png";
import MostlyCloudyIconDay from "./assets/icons/large/11020_mostly_cloudy_large@2x.png";
import MostlyCloudyIconNight from "./assets/icons/large/11021_mostly_cloudy_large@2x.png";

// Fog
import FogIcon from "./assets/icons/large/20000_fog_large@2x.png";
import LightFogIcon from "./assets/icons/large/20000_fog_large@2x.png";
import LightFogMostlyClearDay from "./assets/icons/large/21010_fog_light_mostly_clear_large@2x.png";
import LightFogMostlyClearNight from "./assets/icons/large/21011_fog_light_mostly_clear_large@2x.png";
import LightFogPartlyCloudyDay from "./assets/icons/large/21020_fog_light_partly_cloudy_large@2x.png";
import LightFogPartlyCloudyNight from "./assets/icons/large/21021_fog_light_partly_cloudy_large@2x.png";
import LightFogMostlyCloudyDay from "./assets/icons/large/21030_fog_light_mostly_cloudy_large@2x.png";
import LightFogMostlyCloudyNight from "./assets/icons/large/21031_fog_light_mostly_cloudy_large@2x.png";

// Drizzle
import DrizzleIcon from "./assets/icons/large/40000_drizzle_large@2x.png";
import DrizzleMostlyClearDay from "./assets/icons/large/42030_drizzle_mostly_clear_large@2x.png";
import DrizzleMostlyClearNight from "./assets/icons/large/42031_drizzle_mostly_clear_large@2x.png";
import DrizzlePartlyCloudyDay from "./assets/icons/large/42040_drizzle_partly_cloudy_large@2x.png";
import DrizzlePartlyCloudyNight from "./assets/icons/large/42041_drizzle_partly_cloudy_large@2x.png";
import DrizzleMostlyCloudyDay from "./assets/icons/large/42050_drizzle_mostly_cloudy_large@2x.png";
import DrizzleMostlyCloudyNight from "./assets/icons/large/42051_drizzle_mostly_cloudy_large@2x.png";

// Rain
import RainIcon from "./assets/icons/large/40010_rain_large@2x.png";
import LightRainIcon from "./assets/icons/large/42000_rain_light_large@2x.png";
import LightRainMostlyClearDay from "./assets/icons/large/42130_rain_light_mostly_clear_large@2x.png";
import LightRainMostlyClearNight from "./assets/icons/large/42131_rain_light_mostly_clear_large@2x.png";
import LightRainPartlyCloudyDay from "./assets/icons/large/42140_rain_light_partly_cloudy_large@2x.png";
import LightRainPartlyCloudyNight from "./assets/icons/large/42141_rain_light_partly_cloudy_large@2x.png";
import LightRainMostlyCloudyDay from "./assets/icons/large/42150_rain_light_mostly_cloudy_large@2x.png";
import LightRainMostlyCloudyNight from "./assets/icons/large/42151_rain_light_mostly_cloudy_large@2x.png";

import HeavyRainIcon from "./assets/icons/large/42010_rain_heavy_large@2x.png";
import HeavyRainMostlyClearDay from "./assets/icons/large/42110_rain_heavy_mostly_clear_large@2x.png";
import HeavyRainMostlyClearNight from "./assets/icons/large/42111_rain_heavy_mostly_clear_large@2x.png";
import HeavyRainPartlyCloudyDay from "./assets/icons/large/42020_rain_heavy_partly_cloudy_large@2x.png";
import HeavyRainPartlyCloudyNight from "./assets/icons/large/42021_rain_heavy_partly_cloudy_large@2x.png";
import HeavyRainMostlyCloudyDay from "./assets/icons/large/42120_rain_heavy_mostly_cloudy_large@2x.png";
import HeavyRainMostlyCloudyNight from "./assets/icons/large/42121_rain_heavy_mostly_cloudy_large@2x.png";

// Snow
import SnowIcon from "./assets/icons/large/50000_snow_large@2x.png";
import FlurriesIcon from "./assets/icons/large/50010_flurries_large@2x.png";
import LightSnowIcon from "./assets/icons/large/51000_snow_light_large@2x.png";
import LightSnowMostlyClearDay from "./assets/icons/large/51020_snow_light_mostly_clear_large@2x.png";
import LightSnowMostlyClearNight from "./assets/icons/large/51021_snow_light_mostly_clear_large@2x.png";
import LightSnowPartlyCloudyDay from "./assets/icons/large/51030_snow_light_partly_cloudy_large@2x.png";
import LightSnowPartlyCloudyNight from "./assets/icons/large/51031_snow_light_partly_cloudy_large@2x.png";
import LightSnowMostlyCloudyDay from "./assets/icons/large/51040_snow_light_mostly_cloudy_large@2x.png";
import LightSnowMostlyCloudyNight from "./assets/icons/large/51041_snow_light_mostly_cloudy_large@2x.png";

import HeavySnowIcon from "./assets/icons/large/51010_snow_heavy_large@2x.png";
import HeavySnowMostlyClearDay from "./assets/icons/large/51190_snow_heavy_mostly_clear_large@2x.png";
import HeavySnowMostlyClearNight from "./assets/icons/large/51191_snow_heavy_mostly_clear_large@2x.png";
import HeavySnowPartlyCloudyDay from "./assets/icons/large/51200_snow_heavy_partly_cloudy_large@2x.png";
import HeavySnowPartlyCloudyNight from "./assets/icons/large/51201_snow_heavy_partly_cloudy_large@2x.png";
import HeavySnowMostlyCloudyDay from "./assets/icons/large/51210_snow_heavy_mostly_cloudy_large@2x.png";
import HeavySnowMostlyCloudyNight from "./assets/icons/large/51211_snow_heavy_mostly_cloudy_large@2x.png";

import FreezingDrizzleIcon from "./assets/icons/large/60000_freezing_rain_drizzle_large@2x.png";
import FreezingRainIcon from "./assets/icons/large/60010_freezing_rain_large@2x.png";
import FreezingLightRainIcon from "./assets/icons/large/62000_freezing_rain_light_large@2x.png";
import FreezingHeavyRainIcon from "./assets/icons/large/62010_freezing_rain_heavy_large@2x.png";
import IcePelletsIcon from "./assets/icons/large/70000_ice_pellets_large@2x.png";
import HeavyIcePelletsIcon from "./assets/icons/large/71010_ice_pellets_heavy_large@2x.png";
import LightIcePelletsIcon from "./assets/icons/large/71020_ice_pellets_light_large@2x.png";
import ThunderstormIcon from "./assets/icons/large/80000_tstorm_large@2x.png";

const weatherIcons = {
  1000: { day: clearIconDay, night: clearIconNight },
  1001: cloudyIcon,
  1100: { day: MostlyClearIconDay, night: MostlyClearIconNight },
  1101: { day: PartlyCloudyIconDay, night: PartlyCloudyIconNight },
  1102: { day: MostlyCloudyIconDay, night: MostlyCloudyIconNight },
  2000: FogIcon,
  2100: {
    // Light Fog
    default: LightFogIcon,
    variants: {
      mostlyClear: { day: LightFogMostlyClearDay, night: LightFogMostlyClearNight },
      partlyCloudy: { day: LightFogPartlyCloudyDay, night: LightFogPartlyCloudyNight },
      mostlyCloudy: { day: LightFogMostlyCloudyDay, night: LightFogMostlyCloudyNight },
    },
  },
  4000: {
    // Drizzle
    default: DrizzleIcon,
    variants: {
      mostlyClear: { day: DrizzleMostlyClearDay, night: DrizzleMostlyClearNight },
      partlyCloudy: { day: DrizzlePartlyCloudyDay, night: DrizzlePartlyCloudyNight },
      mostlyCloudy: { day: DrizzleMostlyCloudyDay, night: DrizzleMostlyCloudyNight },
    },
  },
  4001: RainIcon,
  4200: {
    // Light Rain
    default: LightRainIcon,
    variants: {
      mostlyClear: { day: LightRainMostlyClearDay, night: LightRainMostlyClearNight },
      partlyCloudy: { day: LightRainPartlyCloudyDay, night: LightRainPartlyCloudyNight },
      mostlyCloudy: { day: LightRainMostlyCloudyDay, night: LightRainMostlyCloudyNight },
    },
  },
  4201: {
    // Heavy Rain
    default: HeavyRainIcon,
    variants: {
      mostlyClear: { day: HeavyRainMostlyClearDay, night: HeavyRainMostlyClearNight },
      partlyCloudy: { day: HeavyRainPartlyCloudyDay, night: HeavyRainPartlyCloudyNight },
      mostlyCloudy: { day: HeavyRainMostlyCloudyDay, night: HeavyRainMostlyCloudyNight },
    },
  },
  5000: SnowIcon,
  5001: FlurriesIcon,
  5100: {
    // Light Snow
    default: LightSnowIcon,
    variants: {
      mostlyClear: { day: LightSnowMostlyClearDay, night: LightSnowMostlyClearNight },
      partlyCloudy: { day: LightSnowPartlyCloudyDay, night: LightSnowPartlyCloudyNight },
      mostlyCloudy: { day: LightSnowMostlyCloudyDay, night: LightSnowMostlyCloudyNight },
    },
  },
  5101: {
    // Heavy Snow
    default: HeavySnowIcon,
    variants: {
      mostlyClear: { day: HeavySnowMostlyClearDay, night: HeavySnowMostlyClearNight },
      partlyCloudy: { day: HeavySnowPartlyCloudyDay, night: HeavySnowPartlyCloudyNight },
      mostlyCloudy: { day: HeavySnowMostlyCloudyDay, night: HeavySnowMostlyCloudyNight },
    },
  },
  6000: FreezingDrizzleIcon,
  6001: FreezingRainIcon,
  6200: FreezingLightRainIcon,
  6201: FreezingHeavyRainIcon,
  7000: IcePelletsIcon,
  7101: HeavyIcePelletsIcon,
  7102: LightIcePelletsIcon,
  8000: ThunderstormIcon,
};

export function getIcon(weatherCode, isDay = true, cloudCover = null) {
  const iconEntry = weatherIcons[weatherCode];
  if (!iconEntry) return cloudyIcon; // Default fallback

  let selectedIcon = iconEntry;

  // Check for variants based on cloudCover
  if (iconEntry.variants && cloudCover !== null) {
    if (cloudCover < 25) {
      selectedIcon = iconEntry.variants.mostlyClear;
    } else if (cloudCover < 75) {
      selectedIcon = iconEntry.variants.partlyCloudy;
    } else {
      selectedIcon = iconEntry.variants.mostlyCloudy;
    }
  } else if (iconEntry.default) {
    // Fallback to default if no cloudCover or no variants
    selectedIcon = iconEntry.default;
  }

  // If selectedIcon is still an object with day/night, resolve it
  if (selectedIcon && typeof selectedIcon === 'object' && selectedIcon.day && selectedIcon.night) {
    return isDay ? selectedIcon.day : selectedIcon.night;
  }

  // If it was a simple import (string), return it
  return selectedIcon;
}
